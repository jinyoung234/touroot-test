!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=(new Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="8375ef65-ddce-4eac-a233-336bafbed1d5",e._sentryDebugIdIdentifier="sentry-dbid-8375ef65-ddce-4eac-a233-336bafbed1d5")}catch(e){}}();var _global="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};_global.SENTRY_RELEASE={id:"9005dc57eee912e04828a9b1dbb56f2f43576da4"},(globalThis.webpackChunk_2024_touroot=globalThis.webpackChunk_2024_touroot||[]).push([[518],{518:(e,t,r)=>{r.d(t,{k:()=>Je});var s=/(%?)(%([sdijo]))/g;function n(e,...t){if(0===t.length)return e;let r=0,n=e.replace(s,((e,s,n,o)=>{const i=function(e,t){switch(t){case"s":return e;case"d":case"i":return Number(e);case"j":return JSON.stringify(e);case"o":{if("string"==typeof e)return e;const t=JSON.stringify(e);return"{}"===t||"[]"===t||/^\[object .+?\]$/.test(t)?e:t}}}(t[r],o);return s?e:(r++,i)}));return r<t.length&&(n+=` ${t.slice(r).join(" ")}`),n=n.replace(/%{2,2}/g,"%"),n}var o=class extends Error{constructor(e,...t){super(e),this.message=e,this.name="Invariant Violation",this.message=n(e,...t),function(e){if(!e.stack)return;const t=e.stack.split("\n");t.splice(1,2),e.stack=t.join("\n")}(this)}},i=(e,t,...r)=>{if(!e)throw new o(t,...r)};i.as=(e,t,r,...s)=>{if(!t){const t=0===s.length?r:n(r,...s);let o;try{o=Reflect.construct(e,[t])}catch(r){o=e(t)}throw o}};function a(e,...t){return`[MSW] ${n(e,...t)}`}const l={formatMessage:a,warn:function(e,...t){console.warn(a(e,...t))},error:function(e,...t){console.error(a(e,...t))}};class c extends Error{constructor(e){super(e),this.name="InternalError"}}const u=/[\/\\]msw[\/\\]src[\/\\](.+)/,h=/(node_modules)?[\/\\]lib[\/\\](core|browser|node|native|iife)[\/\\]|^[^\/\\]*$/;class d{static cache=new WeakMap;info;isUsed;resolver;resolverGenerator;resolverGeneratorResult;options;constructor(e){this.resolver=e.resolver,this.options=e.options;const t=function(){const e=(new Error).stack;if(!e)return;const t=e.split("\n").slice(1).find((e=>!(u.test(e)||h.test(e))));return t?t.replace(/\s*at [^()]*\(([^)]+)\)/,"$1").replace(/^@/,""):void 0}();this.info={...e.info,callFrame:t},this.isUsed=!1}async parse(e){return{}}async test(e){const t=await this.parse({request:e.request,resolutionContext:e.resolutionContext});return this.predicate({request:e.request,parsedResult:t,resolutionContext:e.resolutionContext})}extendResolverArgs(e){return{}}cloneRequestOrGetFromCache(e){const t=d.cache.get(e);if(void 0!==t)return t;const r=e.clone();return d.cache.set(e,r),r}async run(e){if(this.isUsed&&this.options?.once)return null;const t=this.cloneRequestOrGetFromCache(e.request),r=await this.parse({request:e.request,resolutionContext:e.resolutionContext});if(!this.predicate({request:e.request,parsedResult:r,resolutionContext:e.resolutionContext}))return null;if(this.isUsed&&this.options?.once)return null;this.isUsed=!0;const s=this.wrapResolver(this.resolver)({...this.extendResolverArgs({request:e.request,parsedResult:r}),requestId:e.requestId,request:e.request}).catch((e=>{if(e instanceof Response)return e;throw e})),n=await s;return this.createExecutionResult({request:t,requestId:e.requestId,response:n,parsedResult:r})}wrapResolver(e){return async t=>{const r=this.resolverGenerator||await e(t);if((s=r)&&"function"==typeof s[Symbol.iterator]){this.isUsed=!1;const{value:e,done:t}=r[Symbol.iterator]().next(),s=await e;return t&&(this.isUsed=!0),!s&&t?(i(this.resolverGeneratorResult,"Failed to returned a previously stored generator response: the value is not a valid Response."),this.resolverGeneratorResult.clone()):(this.resolverGenerator||(this.resolverGenerator=r),s&&(this.resolverGeneratorResult=s?.clone()),s)}var s;return r}}createExecutionResult(e){return{handler:this,request:e.request,requestId:e.requestId,response:e.response,parsedResult:e.parsedResult}}}var p=async e=>{try{return{error:null,data:await e().catch((e=>{throw e}))}}catch(e){return{error:e,data:null}}};const f=async({request:e,requestId:t,handlers:r,resolutionContext:s})=>{let n=null,o=null;for(const i of r)if(o=await i.run({request:e,requestId:t,resolutionContext:s}),null!==o&&(n=i),o?.response)break;return n?{handler:n,parsedResult:o?.parsedResult,response:o?.response}:null};var g,m,v=Object.create,y=Object.defineProperty,w=Object.getOwnPropertyDescriptor,b=Object.getOwnPropertyNames,q=Object.getPrototypeOf,k=Object.prototype.hasOwnProperty,x=((e,t,r)=>(r=null!=e?v(q(e)):{},((e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let r of b(t))k.call(e,r)||undefined===r||y(e,r,{get:()=>t[r],enumerable:!(s=w(t,r))||s.enumerable});return e})(e&&e.__esModule?r:y(r,"default",{value:e,enumerable:!0}),e)))((g={"node_modules/set-cookie-parser/lib/set-cookie.js"(e,t){"use strict";var r={decodeValues:!0,map:!1,silent:!1};function s(e){return"string"==typeof e&&!!e.trim()}function n(e,t){var n=e.split(";").filter(s),o=function(e){var t="",r="",s=e.split("=");return s.length>1?(t=s.shift(),r=s.join("=")):r=e,{name:t,value:r}}(n.shift()),i=o.name,a=o.value;t=t?Object.assign({},r,t):r;try{a=t.decodeValues?decodeURIComponent(a):a}catch(e){console.error("set-cookie-parser encountered an error while decoding a cookie with value '"+a+"'. Set options.decodeValues to false to disable this feature.",e)}var l={name:i,value:a};return n.forEach((function(e){var t=e.split("="),r=t.shift().trimLeft().toLowerCase(),s=t.join("=");"expires"===r?l.expires=new Date(s):"max-age"===r?l.maxAge=parseInt(s,10):"secure"===r?l.secure=!0:"httponly"===r?l.httpOnly=!0:"samesite"===r?l.sameSite=s:l[r]=s})),l}function o(e,t){if(t=t?Object.assign({},r,t):r,!e)return t.map?{}:[];if(e.headers)if("function"==typeof e.headers.getSetCookie)e=e.headers.getSetCookie();else if(e.headers["set-cookie"])e=e.headers["set-cookie"];else{var o=e.headers[Object.keys(e.headers).find((function(e){return"set-cookie"===e.toLowerCase()}))];o||!e.headers.cookie||t.silent||console.warn("Warning: set-cookie-parser appears to have been called on a request object. It is designed to parse Set-Cookie headers from responses, not Cookie headers from requests. Set the option {silent: true} to suppress this warning."),e=o}return Array.isArray(e)||(e=[e]),(t=t?Object.assign({},r,t):r).map?e.filter(s).reduce((function(e,r){var s=n(r,t);return e[s.name]=s,e}),{}):e.filter(s).map((function(e){return n(e,t)}))}t.exports=o,t.exports.parse=o,t.exports.parseString=n,t.exports.splitCookiesString=function(e){if(Array.isArray(e))return e;if("string"!=typeof e)return[];var t,r,s,n,o,i=[],a=0;function l(){for(;a<e.length&&/\s/.test(e.charAt(a));)a+=1;return a<e.length}for(;a<e.length;){for(t=a,o=!1;l();)if(","===(r=e.charAt(a))){for(s=a,a+=1,l(),n=a;a<e.length&&"="!==(r=e.charAt(a))&&";"!==r&&","!==r;)a+=1;a<e.length&&"="===e.charAt(a)?(o=!0,a=n,i.push(e.substring(t,s)),t=a):a=s+1}else a+=1;(!o||a>=e.length)&&i.push(e.substring(t,e.length))}return i}}},function(){return m||(0,g[b(g)[0]])((m={exports:{}}).exports,m),m.exports})()),L="MSW_COOKIE_STORE",E=function(){try{if(null==localStorage)return!1;const e=L+"_test";return localStorage.setItem(e,"test"),localStorage.getItem(e),localStorage.removeItem(e),!0}catch(e){return!1}}();function R(e,t){try{return e[t],!0}catch{return!1}}var S=new class{constructor(){this.store=new Map}add(e,t){if(R(e,"credentials")&&"omit"===e.credentials)return;const r=new URL(e.url),s=t.headers.get("set-cookie");if(!s)return;const n=Date.now(),o=(0,x.parse)(s).map((({maxAge:e,...t})=>({...t,expires:void 0===e?t.expires:new Date(n+1e3*e),maxAge:e}))),i=this.store.get(r.origin)||new Map;o.forEach((e=>{this.store.set(r.origin,i.set(e.name,e))}))}get(e){this.deleteExpiredCookies();const t=new URL(e.url),r=this.store.get(t.origin)||new Map;if(!R(e,"credentials"))return r;switch(e.credentials){case"include":return"undefined"==typeof document||(0,x.parse)(document.cookie).forEach((e=>{r.set(e.name,e)})),r;case"same-origin":return r;default:return new Map}}getAll(){return this.deleteExpiredCookies(),this.store}deleteAll(e){const t=new URL(e.url);this.store.delete(t.origin)}clear(){this.store.clear()}hydrate(){if(!E)return;const e=localStorage.getItem(L);if(e)try{JSON.parse(e).forEach((([e,t])=>{this.store.set(e,new Map(t.map((([e,{expires:t,...r}])=>[e,void 0===t?r:{...r,expires:new Date(t)}]))))}))}catch(e){console.warn(`\n[virtual-cookie] Failed to parse a stored cookie from the localStorage (key "${L}").\n\nStored value:\n${localStorage.getItem(L)}\n\nThrown exception:\n${e}\n\nInvalid value has been removed from localStorage to prevent subsequent failed parsing attempts.`),localStorage.removeItem(L)}}persist(){if(!E)return;const e=Array.from(this.store.entries()).map((([e,t])=>[e,Array.from(t.entries())]));localStorage.setItem(L,JSON.stringify(e))}deleteExpiredCookies(){const e=Date.now();this.store.forEach(((t,r)=>{t.forEach((({expires:r,name:s})=>{void 0!==r&&r.getTime()<=e&&t.delete(s)})),0===t.size&&this.store.delete(r)}))}};async function I(e,t,r,s,n,o){if(n.emit("request:start",{request:e,requestId:t}),"bypass"===e.headers.get("x-msw-intention"))return n.emit("request:end",{request:e,requestId:t}),void o?.onPassthroughResponse?.(e);const i=await p((()=>f({request:e,requestId:t,handlers:r,resolutionContext:o?.resolutionContext})));if(i.error)throw n.emit("unhandledException",{error:i.error,request:e,requestId:t}),i.error;if(!i.data)return await async function(e,t="warn"){const r=new URL(e.url),s=function(e){if("undefined"==typeof location)return e.toString();const t=e instanceof URL?e:new URL(e);return t.origin===location.origin?t.pathname:t.origin+t.pathname}(r)+r.search,n=`intercepted a request without a matching request handler:\n\n  â€¢ ${e.method} ${s}\n\nIf you still wish to intercept this unhandled request, please create a request handler for it.\nRead more: https://mswjs.io/docs/getting-started/mocks`;function o(e){switch(e){case"error":throw l.error("Error: %s",n),new c(l.formatMessage('Cannot bypass a request when using the "error" strategy for the "onUnhandledRequest" option.'));case"warn":l.warn("Warning: %s",n);break;case"bypass":break;default:throw new c(l.formatMessage('Failed to react to an unhandled request: unknown strategy "%s". Please provide one of the supported strategies ("bypass", "warn", "error") or a custom callback function as the value of the "onUnhandledRequest" option.',e))}}"function"!=typeof t?"file:"!==r.protocol&&o(t):t(e,{warning:o.bind(null,"warn"),error:o.bind(null,"error")})}(e,s.onUnhandledRequest),n.emit("request:unhandled",{request:e,requestId:t}),n.emit("request:end",{request:e,requestId:t}),void o?.onPassthroughResponse?.(e);const{response:a}=i.data;if(!a)return n.emit("request:end",{request:e,requestId:t}),void o?.onPassthroughResponse?.(e);if(302===a.status&&"passthrough"===a.headers.get("x-msw-intention"))return n.emit("request:end",{request:e,requestId:t}),void o?.onPassthroughResponse?.(e);!function(e,t){S.add({...e,url:e.url.toString()},t),S.persist()}(e,a),n.emit("request:match",{request:e,requestId:t});const u=i.data,h=o?.transformResponse?.(a)||a;return o?.onMockedResponse?.(h,u),n.emit("request:end",{request:e,requestId:t}),h}var T=class extends Error{constructor(e,t,r){super(`Possible EventEmitter memory leak detected. ${r} ${t.toString()} listeners added. Use emitter.setMaxListeners() to increase limit`),this.emitter=e,this.type=t,this.count=r,this.name="MaxListenersExceededWarning"}},C=class{static listenerCount(e,t){return e.listenerCount(t)}constructor(){this.events=new Map,this.maxListeners=C.defaultMaxListeners,this.hasWarnedAboutPotentialMemoryLeak=!1}_emitInternalEvent(e,t,r){this.emit(e,t,r)}_getListeners(e){return Array.prototype.concat.apply([],this.events.get(e))||[]}_removeListener(e,t){const r=e.indexOf(t);return r>-1&&e.splice(r,1),[]}_wrapOnceListener(e,t){const r=(...s)=>(this.removeListener(e,r),t.apply(this,s));return Object.defineProperty(r,"name",{value:t.name}),r}setMaxListeners(e){return this.maxListeners=e,this}getMaxListeners(){return this.maxListeners}eventNames(){return Array.from(this.events.keys())}emit(e,...t){const r=this._getListeners(e);return r.forEach((e=>{e.apply(this,t)})),r.length>0}addListener(e,t){this._emitInternalEvent("newListener",e,t);const r=this._getListeners(e).concat(t);if(this.events.set(e,r),this.maxListeners>0&&this.listenerCount(e)>this.maxListeners&&!this.hasWarnedAboutPotentialMemoryLeak){this.hasWarnedAboutPotentialMemoryLeak=!0;const t=new T(this,e,this.listenerCount(e));console.warn(t)}return this}on(e,t){return this.addListener(e,t)}once(e,t){return this.addListener(e,this._wrapOnceListener(e,t))}prependListener(e,t){const r=this._getListeners(e);if(r.length>0){const s=[t].concat(r);this.events.set(e,s)}else this.events.set(e,r.concat(t));return this}prependOnceListener(e,t){return this.prependListener(e,this._wrapOnceListener(e,t))}removeListener(e,t){const r=this._getListeners(e);return r.length>0&&(this._removeListener(r,t),this.events.set(e,r),this._emitInternalEvent("removeListener",e,t)),this}off(e,t){return this.removeListener(e,t)}removeAllListeners(e){return e?this.events.delete(e):this.events.clear(),this}listeners(e){return Array.from(this._getListeners(e))}listenerCount(e){return this._getListeners(e).length}rawListeners(e){return this.listeners(e)}},M=C;M.defaultMaxListeners=10;class P{subscriptions=[];dispose(){let e;for(;e=this.subscriptions.shift();)e()}}class O{constructor(e){this.initialHandlers=e,this.handlers=[...e]}handlers;prepend(e){this.handlers.unshift(...e)}reset(e){this.handlers=e.length>0?[...e]:[...this.initialHandlers]}currentHandlers(){return this.handlers}}class A extends P{handlersController;emitter;publicEmitter;events;constructor(...e){super(),i(this.validateHandlers(e),l.formatMessage("Failed to apply given request handlers: invalid input. Did you forget to spread the request handlers Array?")),this.handlersController=new O(e),this.emitter=new M,this.publicEmitter=new M,function(e,t){const r=e.emit;if(r._isPiped)return;const s=function(e,...s){return t.emit(e,...s),r.call(this,e,...s)};s._isPiped=!0,e.emit=s}(this.emitter,this.publicEmitter),this.events=this.createLifeCycleEvents(),this.subscriptions.push((()=>{this.emitter.removeAllListeners(),this.publicEmitter.removeAllListeners()}))}validateHandlers(e){return e.every((e=>!Array.isArray(e)))}use(...e){i(this.validateHandlers(e),l.formatMessage('Failed to call "use()" with the given request handlers: invalid input. Did you forget to spread the array of request handlers?')),this.handlersController.prepend(e)}restoreHandlers(){this.handlersController.currentHandlers().forEach((e=>{e.isUsed=!1}))}resetHandlers(...e){this.handlersController.reset(e)}listHandlers(){return function(e){const t=[...e];return Object.freeze(t),t}(this.handlersController.currentHandlers())}createLifeCycleEvents(){return{on:(...e)=>this.publicEmitter.on(...e),removeListener:(...e)=>this.publicEmitter.removeListener(...e),removeAllListeners:(...e)=>this.publicEmitter.removeAllListeners(...e)}}}function j(e){return null!=e&&"object"==typeof e&&!Array.isArray(e)}function W(e,t){return Object.entries(t).reduce(((e,[t,r])=>{const s=e[t];return Array.isArray(s)&&Array.isArray(r)?(e[t]=s.concat(r),e):j(s)&&j(r)?(e[t]=W(s,r),e):(e[t]=r,e)}),Object.assign({},e))}var _=/(%?)(%([sdijo]))/g;function H(e,...t){if(0===t.length)return e;let r=0,s=e.replace(_,((e,s,n,o)=>{const i=function(e,t){switch(t){case"s":return e;case"d":case"i":return Number(e);case"j":return JSON.stringify(e);case"o":{if("string"==typeof e)return e;const t=JSON.stringify(e);return"{}"===t||"[]"===t||/^\[object .+?\]$/.test(t)?e:t}}}(t[r],o);return s?e:(r++,i)}));return r<t.length&&(s+=` ${t.slice(r).join(" ")}`),s=s.replace(/%{2,2}/g,"%"),s}var D=class extends Error{constructor(e,...t){super(e),this.message=e,this.name="Invariant Violation",this.message=H(e,...t),function(e){if(!e.stack)return;const t=e.stack.split("\n");t.splice(1,2),e.stack=t.join("\n")}(this)}},N=(e,t,...r)=>{if(!e)throw new D(t,...r)};function U(){if("undefined"!=typeof navigator&&"ReactNative"===navigator.product)return!0;if("undefined"!=typeof process){const e=process.type;return"renderer"!==e&&"worker"!==e&&!(!process.versions||!process.versions.node)}return!1}N.as=(e,t,r,...s)=>{if(!t){const t=0===s.length?r:H(r,s);let n;try{n=Reflect.construct(e,[t])}catch(r){n=e(t)}throw n}};var $=async e=>{try{return{error:null,data:await e().catch((e=>{throw e}))}}catch(e){return{error:e,data:null}}};function G(e,t,r){return[e.active,e.installing,e.waiting].filter((e=>null!=e)).find((e=>r(e.scriptURL,t)))||null}function B(e={}){if(e.quiet)return;const t=e.message||"Mocking enabled.";console.groupCollapsed(`%c${l.formatMessage(t)}`,"color:orangered;font-weight:bold;"),console.log("%cDocumentation: %chttps://mswjs.io/docs","font-weight:bold","font-weight:normal"),console.log("Found an issue? https://github.com/mswjs/msw/issues"),e.workerUrl&&console.log("Worker script URL:",e.workerUrl),e.workerScope&&console.log("Worker scope:",e.workerScope),console.groupEnd()}var F=class{constructor(e){this.port=e}postMessage(e,...t){const[r,s]=t;this.port.postMessage({type:e,data:r},{transfer:s})}};function X(e){if(!["HEAD","GET"].includes(e.method))return e.body}var V=new TextEncoder,J=Symbol("isPatchedModule"),K=new Set([101,103,204,205,304]);function Y(e){return K.has(e)}function z(e){return new Response(JSON.stringify(e instanceof Error?{name:e.name,message:e.message,stack:e.stack}:e),{status:500,statusText:"Unhandled Exception",headers:{"Content-Type":"application/json"}})}function Q(e){return function(e){try{return e.type,!0}catch(e){return!1}}(e)&&"error"===e.type}var Z=Object.defineProperty,ee={};function te(e){return`[33m${e}[0m`}function re(e){return`[34m${e}[0m`}function se(e){return`[90m${e}[0m`}function ne(e){return`[31m${e}[0m`}function oe(e){return`[32m${e}[0m`}((e,t)=>{for(var r in t)Z(e,r,{get:t[r],enumerable:!0})})(ee,{blue:()=>re,gray:()=>se,green:()=>oe,red:()=>ne,yellow:()=>te});var ie=U(),ae=class{constructor(e){this.name=e,this.prefix=`[${this.name}]`;const t=pe("DEBUG"),r=pe("LOG_LEVEL");"1"===t||"true"===t||void 0!==t&&this.name.startsWith(t)?(this.debug=fe(r,"debug")?ce:this.debug,this.info=fe(r,"info")?ce:this.info,this.success=fe(r,"success")?ce:this.success,this.warning=fe(r,"warning")?ce:this.warning,this.error=fe(r,"error")?ce:this.error):(this.info=ce,this.success=ce,this.warning=ce,this.error=ce,this.only=ce)}prefix;extend(e){return new ae(`${this.name}:${e}`)}debug(e,...t){this.logEntry({level:"debug",message:se(e),positionals:t,prefix:this.prefix,colors:{prefix:"gray"}})}info(e,...t){this.logEntry({level:"info",message:e,positionals:t,prefix:this.prefix,colors:{prefix:"blue"}});const r=new le;return(e,...t)=>{r.measure(),this.logEntry({level:"info",message:`${e} ${se(`${r.deltaTime}ms`)}`,positionals:t,prefix:this.prefix,colors:{prefix:"blue"}})}}success(e,...t){this.logEntry({level:"info",message:e,positionals:t,prefix:`âœ” ${this.prefix}`,colors:{timestamp:"green",prefix:"green"}})}warning(e,...t){this.logEntry({level:"warning",message:e,positionals:t,prefix:`âš  ${this.prefix}`,colors:{timestamp:"yellow",prefix:"yellow"}})}error(e,...t){this.logEntry({level:"error",message:e,positionals:t,prefix:`âœ– ${this.prefix}`,colors:{timestamp:"red",prefix:"red"}})}only(e){e()}createEntry(e,t){return{timestamp:new Date,level:e,message:t}}logEntry(e){const{level:t,message:r,prefix:s,colors:n,positionals:o=[]}=e,i=this.createEntry(t,r),a={timestamp:ee[n?.timestamp||"gray"],prefix:ee[n?.prefix||"gray"]};this.getWriter(t)([a.timestamp(this.formatTimestamp(i.timestamp))].concat(null!=s?a.prefix(s):[]).concat(ge(r)).join(" "),...o.map(ge))}formatTimestamp(e){return`${e.toLocaleTimeString("en-GB")}:${e.getMilliseconds()}`}getWriter(e){switch(e){case"debug":case"success":case"info":return ue;case"warning":return he;case"error":return de}}},le=class{startTime;endTime;deltaTime;constructor(){this.startTime=performance.now()}measure(){this.endTime=performance.now();const e=this.endTime-this.startTime;this.deltaTime=e.toFixed(2)}},ce=()=>{};function ue(e,...t){ie?process.stdout.write(H(e,...t)+"\n"):console.log(e,...t)}function he(e,...t){ie?process.stderr.write(H(e,...t)+"\n"):console.warn(e,...t)}function de(e,...t){ie?process.stderr.write(H(e,...t)+"\n"):console.error(e,...t)}function pe(e){return ie?"MISSING_ENV_VAR"[e]:globalThis[e]?.toString()}function fe(e,t){return void 0!==e&&e!==t}function ge(e){return void 0===e?"undefined":null===e?"null":"string"==typeof e?e:"object"==typeof e?JSON.stringify(e):e.toString()}var me=class extends Error{constructor(e,t,r){super(`Possible EventEmitter memory leak detected. ${r} ${t.toString()} listeners added. Use emitter.setMaxListeners() to increase limit`),this.emitter=e,this.type=t,this.count=r,this.name="MaxListenersExceededWarning"}},ve=class{static listenerCount(e,t){return e.listenerCount(t)}constructor(){this.events=new Map,this.maxListeners=ve.defaultMaxListeners,this.hasWarnedAboutPotentialMemoryLeak=!1}_emitInternalEvent(e,t,r){this.emit(e,t,r)}_getListeners(e){return Array.prototype.concat.apply([],this.events.get(e))||[]}_removeListener(e,t){const r=e.indexOf(t);return r>-1&&e.splice(r,1),[]}_wrapOnceListener(e,t){const r=(...s)=>(this.removeListener(e,r),t.apply(this,s));return Object.defineProperty(r,"name",{value:t.name}),r}setMaxListeners(e){return this.maxListeners=e,this}getMaxListeners(){return this.maxListeners}eventNames(){return Array.from(this.events.keys())}emit(e,...t){const r=this._getListeners(e);return r.forEach((e=>{e.apply(this,t)})),r.length>0}addListener(e,t){this._emitInternalEvent("newListener",e,t);const r=this._getListeners(e).concat(t);if(this.events.set(e,r),this.maxListeners>0&&this.listenerCount(e)>this.maxListeners&&!this.hasWarnedAboutPotentialMemoryLeak){this.hasWarnedAboutPotentialMemoryLeak=!0;const t=new me(this,e,this.listenerCount(e));console.warn(t)}return this}on(e,t){return this.addListener(e,t)}once(e,t){return this.addListener(e,this._wrapOnceListener(e,t))}prependListener(e,t){const r=this._getListeners(e);if(r.length>0){const s=[t].concat(r);this.events.set(e,s)}else this.events.set(e,r.concat(t));return this}prependOnceListener(e,t){return this.prependListener(e,this._wrapOnceListener(e,t))}removeListener(e,t){const r=this._getListeners(e);return r.length>0&&(this._removeListener(r,t),this.events.set(e,r),this._emitInternalEvent("removeListener",e,t)),this}off(e,t){return this.removeListener(e,t)}removeAllListeners(e){return e?this.events.delete(e):this.events.clear(),this}listeners(e){return Array.from(this._getListeners(e))}listenerCount(e){return this._getListeners(e).length}rawListeners(e){return this.listeners(e)}},ye=ve;function we(e){return globalThis[e]||void 0}ye.defaultMaxListeners=10;var be=class{constructor(e){this.symbol=e,this.readyState="INACTIVE",this.emitter=new ye,this.subscriptions=[],this.logger=new ae(e.description),this.emitter.setMaxListeners(0),this.logger.info("constructing the interceptor...")}checkEnvironment(){return!0}apply(){const e=this.logger.extend("apply");if(e.info("applying the interceptor..."),"APPLIED"===this.readyState)return void e.info("intercepted already applied!");if(!this.checkEnvironment())return void e.info("the interceptor cannot be applied in this environment!");this.readyState="APPLYING";const t=this.getInstance();if(t)return e.info("found a running instance, reusing..."),this.on=(r,s)=>(e.info('proxying the "%s" listener',r),t.emitter.addListener(r,s),this.subscriptions.push((()=>{t.emitter.removeListener(r,s),e.info('removed proxied "%s" listener!',r)})),this),void(this.readyState="APPLIED");e.info("no running instance found, setting up a new instance..."),this.setup(),this.setInstance(),this.readyState="APPLIED"}setup(){}on(e,t){const r=this.logger.extend("on");return"DISPOSING"===this.readyState||"DISPOSED"===this.readyState?(r.info("cannot listen to events, already disposed!"),this):(r.info('adding "%s" event listener:',e,t),this.emitter.on(e,t),this)}once(e,t){return this.emitter.once(e,t),this}off(e,t){return this.emitter.off(e,t),this}removeAllListeners(e){return this.emitter.removeAllListeners(e),this}dispose(){const e=this.logger.extend("dispose");if("DISPOSED"!==this.readyState)if(e.info("disposing the interceptor..."),this.readyState="DISPOSING",this.getInstance()){if(this.clearInstance(),e.info("global symbol deleted:",we(this.symbol)),this.subscriptions.length>0){e.info("disposing of %d subscriptions...",this.subscriptions.length);for(const e of this.subscriptions)e();this.subscriptions=[],e.info("disposed of all subscriptions!",this.subscriptions.length)}this.emitter.removeAllListeners(),e.info("destroyed the listener!"),this.readyState="DISPOSED"}else e.info("no interceptors running, skipping dispose...");else e.info("cannot dispose, already disposed!")}getInstance(){var e;const t=we(this.symbol);return this.logger.info("retrieved global instance:",null==(e=null==t?void 0:t.constructor)?void 0:e.name),t}setInstance(){var e;e=this.symbol,globalThis[e]=this,this.logger.info("set global instance!",this.symbol.description)}clearInstance(){var e;e=this.symbol,delete globalThis[e],this.logger.info("cleared global instance!",this.symbol.description)}};function qe(){return Math.random().toString(16).slice(2)}var ke=class extends be{constructor(e){ke.symbol=Symbol(e.name),super(ke.symbol),this.interceptors=e.interceptors}setup(){const e=this.logger.extend("setup");e.info("applying all %d interceptors...",this.interceptors.length);for(const t of this.interceptors)e.info('applying "%s" interceptor...',t.constructor.name),t.apply(),e.info("adding interceptor dispose subscription"),this.subscriptions.push((()=>t.dispose()))}on(e,t){for(const r of this.interceptors)r.on(e,t);return this}once(e,t){for(const r of this.interceptors)r.once(e,t);return this}off(e,t){for(const r of this.interceptors)r.off(e,t);return this}removeAllListeners(e){for(const t of this.interceptors)t.removeAllListeners(e);return this}},xe=e=>function(t,r){const s=(async()=>{e.events.removeAllListeners(),e.workerChannel.on("REQUEST",((e,t)=>async(r,s)=>{const n=new F(r.ports[0]),o=s.payload.id,i=(a=s.payload,new Request(a.url,{...a,body:X(a)}));var a;const c=i.clone(),u=i.clone();d.cache.set(i,u),e.requests.set(o,u);try{await I(i,o,e.getRequestHandlers(),t,e.emitter,{onPassthroughResponse(){n.postMessage("PASSTHROUGH")},async onMockedResponse(r,{handler:s,parsedResult:o}){const i=r.clone(),a=r.clone(),l=function(e){return{status:e.status,statusText:e.statusText,headers:Object.fromEntries(e.headers.entries())}}(r);if(e.supports.readableStreamTransfer){const e=r.body;n.postMessage("MOCK_RESPONSE",{...l,body:e},e?[e]:void 0)}else{const e=null===r.body?null:await i.arrayBuffer();n.postMessage("MOCK_RESPONSE",{...l,body:e})}t.quiet||e.emitter.once("response:mocked",(()=>{s.log({request:c,response:a,parsedResult:o})}))}})}catch(e){e instanceof Error&&(l.error('Uncaught exception in the request handler for "%s %s":\n\n%s\n\nThis exception has been gracefully handled as a 500 response, however, it\'s strongly recommended to resolve this error, as it indicates a mistake in your code. If you wish to mock an error response, please see this guide: https://mswjs.io/docs/recipes/mocking-error-responses',i.method,i.url,e.stack??e),n.postMessage("MOCK_RESPONSE",{status:500,statusText:"Request Handler Error",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:e.name,message:e.message,stack:e.stack})}))}})(e,t)),e.workerChannel.on("RESPONSE",function(e){return(t,r)=>{const{payload:s}=r,{requestId:n}=s,o=e.requests.get(n);if(e.requests.delete(n),s.type?.includes("opaque"))return;const i=0===s.status?Response.error():new Response(Y(s.status)?null:s.body,s);i.url||Object.defineProperty(i,"url",{value:o.url,enumerable:!0,writable:!1}),e.emitter.emit(s.isMockedResponse?"response:mocked":"response:bypass",{response:i,request:o,requestId:s.requestId})}}(e));const s=await(async(e,t={},r)=>{const s=new URL(e,location.href).href,n=await navigator.serviceWorker.getRegistrations().then((e=>e.filter((e=>G(e,s,r)))));!navigator.serviceWorker.controller&&n.length>0&&location.reload();const[o]=n;if(o)return o.update().then((()=>[G(o,s,r),o]));const i=await $((async()=>{const n=await navigator.serviceWorker.register(e,t);return[G(n,s,r),n]}));if(i.error){if(i.error.message.includes("(404)")){const e=new URL(t?.scope||"/",location.href);throw new Error(l.formatMessage(`Failed to register a Service Worker for scope ('${e.href}') with script ('${s}'): Service Worker script does not exist at the given path.\n\nDid you forget to run "npx msw init <PUBLIC_DIR>"?\n\nLearn more about creating the Service Worker script: https://mswjs.io/docs/cli/init`))}throw new Error(l.formatMessage("Failed to register the Service Worker:\n\n%s",i.error.message))}return i.data})(t.serviceWorker.url,t.serviceWorker.options,t.findWorker),[n,o]=s;if(!n){const e=r?.findWorker?l.formatMessage('Failed to locate the Service Worker registration using a custom "findWorker" predicate.\n\nPlease ensure that the custom predicate properly locates the Service Worker registration at "%s".\nMore details: https://mswjs.io/docs/api/setup-worker/start#findworker\n',t.serviceWorker.url):l.formatMessage('Failed to locate the Service Worker registration.\n\nThis most likely means that the worker script URL "%s" cannot resolve against the actual public hostname (%s). This may happen if your application runs behind a proxy, or has a dynamic hostname.\n\nPlease consider using a custom "serviceWorker.url" option to point to the actual worker script location, or a custom "findWorker" option to resolve the Service Worker registration manually. More details: https://mswjs.io/docs/api/setup-worker/start',t.serviceWorker.url,location.host);throw new Error(e)}return e.worker=n,e.registration=o,e.events.addListener(window,"beforeunload",(()=>{"redundant"!==n.state&&e.workerChannel.send("CLIENT_CLOSED"),window.clearInterval(e.keepAliveInterval)})),await async function(e){e.workerChannel.send("INTEGRITY_CHECK_REQUEST");const{payload:t}=await e.events.once("INTEGRITY_CHECK_RESPONSE");"26357c79639bfa20d64c0efca2a87423"!==t.checksum&&l.warn(`The currently registered Service Worker has been generated by a different version of MSW (${t.packageVersion}) and may not be fully compatible with the installed version.\n\nIt's recommended you update your worker script by running this command:\n\n  â€¢ npx msw init <PUBLIC_DIR>\n\nYou can also automate this process and make the worker script update automatically upon the library installations. Read more: https://mswjs.io/docs/cli/init.`)}(e).catch((e=>{l.error("Error while checking the worker script integrity. Please report this on GitHub (https://github.com/mswjs/msw/issues), including the original error below."),console.error(e)})),e.keepAliveInterval=window.setInterval((()=>e.workerChannel.send("KEEPALIVE_REQUEST")),5e3),function(e,t){t?.quiet||location.href.startsWith(e.scope)||l.warn(`Cannot intercept requests on this page because it's outside of the worker's scope ("${e.scope}"). If you wish to mock API requests on this page, you must resolve this scope issue.\n\n- (Recommended) Register the worker at the root level ("/") of your application.\n- Set the "Service-Worker-Allowed" response header to allow out-of-scope workers.`)}(o,e.startOptions),o})().then((async r=>{const s=r.installing||r.waiting;return s&&await new Promise((e=>{s.addEventListener("statechange",(()=>{if("activated"===s.state)return e()}))})),await async function(e,t){e.workerChannel.send("MOCK_ACTIVATE"),await e.events.once("MOCKING_ENABLED"),e.isMockingEnabled?l.warn('Found a redundant "worker.start()" call. Note that starting the worker while mocking is already enabled will have no effect. Consider removing this "worker.start()" call.'):(e.isMockingEnabled=!0,B({quiet:t.quiet,workerScope:e.registration?.scope,workerUrl:e.worker?.scriptURL}))}(e,t).catch((e=>{throw new Error(`Failed to enable mocking: ${e?.message}`)})),r}));return s};function Le(e={}){e.quiet||console.log(`%c${l.formatMessage("Mocking disabled.")}`,"color:orangered;font-weight:bold;")}var Ee={serviceWorker:{url:"/mockServiceWorker.js",options:null},quiet:!1,waitUntilReady:!0,onUnhandledRequest:"warn",findWorker:(e,t)=>e===t},Re=class extends Promise{#e;resolve;reject;constructor(e=null){const t=function(){const e=(t,r)=>{e.state="pending",e.resolve=r=>{if("pending"===e.state)return e.result=r,t(r instanceof Promise?r:Promise.resolve(r).then((t=>(e.state="fulfilled",t))))},e.reject=t=>{if("pending"===e.state)return queueMicrotask((()=>{e.state="rejected"})),r(e.rejectionReason=t)}};return e}();super(((r,s)=>{t(r,s),e?.(t.resolve,t.reject)})),this.#e=t,this.resolve=this.#e.resolve,this.reject=this.#e.reject}get state(){return this.#e.state}get rejectionReason(){return this.#e.rejectionReason}then(e,t){return this.#t(super.then(e,t))}catch(e){return this.#t(super.catch(e))}finally(e){return this.#t(super.finally(e))}#t(e){return Object.defineProperties(e,{resolve:{configurable:!0,value:this.resolve},reject:{configurable:!0,value:this.reject}})}},Se=class{constructor(e){this.request=e,this.responsePromise=new Re}respondWith(e){N("pending"===this.responsePromise.state,'Failed to respond to "%s %s" request: the "request" event has already been responded to.',this.request.method,this.request.url),this.responsePromise.resolve(e)}};function Ie(e){const t=new Se(e);return Reflect.set(e,"respondWith",t.respondWith.bind(t)),{interactiveRequest:e,requestController:t}}async function Te(e,t,...r){const s=e.listeners(t);if(0!==s.length)for(const t of s)await t.apply(e,r)}var Ce=class extends be{constructor(){super(Ce.symbol)}checkEnvironment(){return"undefined"!=typeof globalThis&&void 0!==globalThis.fetch}async setup(){const e=globalThis.fetch;N(!e[J],'Failed to patch the "fetch" module: already patched.'),globalThis.fetch=async(t,r)=>{var s;const n=qe(),o="string"!=typeof t||"undefined"==typeof location||function(e){try{return new URL(e),!0}catch(e){return!1}}(t)?t:new URL(t,location.origin),i=new Request(o,r);this.logger.info("[%s] %s",i.method,i.url);const{interactiveRequest:a,requestController:l}=Ie(i);this.logger.info('emitting the "request" event for %d listener(s)...',this.emitter.listenerCount("request")),this.emitter.once("request",(({requestId:e})=>{e===n&&"pending"===l.responsePromise.state&&l.responsePromise.resolve(void 0)})),this.logger.info("awaiting for the mocked response...");const c=a.signal,u=new Re;c&&c.addEventListener("abort",(()=>{u.reject(c.reason)}),{once:!0});const h=new Re,d=e=>{if(this.logger.info("responding with a mock response:",e),this.emitter.listenerCount("response")>0){this.logger.info('emitting the "response" event...');const t=e.clone();this.emitter.emit("response",{response:t,isMockedResponse:!0,request:a,requestId:n})}Object.defineProperty(e,"url",{writable:!1,enumerable:!0,configurable:!1,value:i.url}),h.resolve(e)},p=e=>{h.reject(e)},f=await $((async()=>{const e=Te(this.emitter,"request",{request:a,requestId:n});await Promise.race([u,e,l.responsePromise]),this.logger.info("all request listeners have been resolved!");const t=await l.responsePromise;return this.logger.info("event.respondWith called with:",t),t}));if("rejected"===u.state)return this.logger.info("request has been aborted:",u.rejectionReason),h.reject(u.rejectionReason),h;if(f.error)return this.logger.info("request listerner threw an error:",f.error),f.error instanceof Response&&(Q(f.error)?p(Pe(f.error)):d(f.error)),this.emitter.listenerCount("unhandledException")>0&&(await Te(this.emitter,"unhandledException",{error:f.error,request:i,requestId:n,controller:{respondWith:d,errorWith:p}}),"pending"!==h.state)||d(z(f.error)),h;const g=f.data;return g&&!(null==(s=i.signal)?void 0:s.aborted)?(this.logger.info("received mocked response:",g),Q(g)?(this.logger.info("received a network error response, rejecting the request promise..."),p(Pe(g))):d(g),h):(this.logger.info("no mocked response received!"),e(i).then((e=>{if(this.logger.info("original fetch performed",e),this.emitter.listenerCount("response")>0){this.logger.info('emitting the "response" event...');const t=e.clone();this.emitter.emit("response",{response:t,isMockedResponse:!1,request:a,requestId:n})}return e})))},Object.defineProperty(globalThis.fetch,J,{enumerable:!0,configurable:!0,value:!0}),this.subscriptions.push((()=>{Object.defineProperty(globalThis.fetch,J,{value:void 0}),globalThis.fetch=e,this.logger.info('restored native "globalThis.fetch"!',globalThis.fetch.name)}))}},Me=Ce;function Pe(e){return Object.assign(new TypeError("Failed to fetch"),{cause:e})}Me.symbol=Symbol("fetch");var Oe=class{constructor(e,t){this.AT_TARGET=0,this.BUBBLING_PHASE=0,this.CAPTURING_PHASE=0,this.NONE=0,this.type="",this.srcElement=null,this.currentTarget=null,this.eventPhase=0,this.isTrusted=!0,this.composed=!1,this.cancelable=!0,this.defaultPrevented=!1,this.bubbles=!0,this.lengthComputable=!0,this.loaded=0,this.total=0,this.cancelBubble=!1,this.returnValue=!0,this.type=e,this.target=(null==t?void 0:t.target)||null,this.currentTarget=(null==t?void 0:t.currentTarget)||null,this.timeStamp=Date.now()}composedPath(){return[]}initEvent(e,t,r){this.type=e,this.bubbles=!!t,this.cancelable=!!r}preventDefault(){this.defaultPrevented=!0}stopPropagation(){}stopImmediatePropagation(){}},Ae=class extends Oe{constructor(e,t){super(e),this.lengthComputable=(null==t?void 0:t.lengthComputable)||!1,this.composed=(null==t?void 0:t.composed)||!1,this.loaded=(null==t?void 0:t.loaded)||0,this.total=(null==t?void 0:t.total)||0}},je="undefined"!=typeof ProgressEvent;function We(e,t){if(!(t in e))return null;if(Object.prototype.hasOwnProperty.call(e,t))return e;const r=Reflect.getPrototypeOf(e);return r?We(r,t):null}function _e(e,t){const r=new Proxy(e,function(e){const{constructorCall:t,methodCall:r,getProperty:s,setProperty:n}=e,o={};return void 0!==t&&(o.construct=function(e,r,s){const n=Reflect.construct.bind(null,e,r,s);return t.call(s,r,n)}),o.set=function(e,t,r){const s=()=>{const s=We(e,t)||e,n=Reflect.getOwnPropertyDescriptor(s,t);return void 0!==(null==n?void 0:n.set)?(n.set.apply(e,[r]),!0):Reflect.defineProperty(s,t,{writable:!0,enumerable:!0,configurable:!0,value:r})};return void 0!==n?n.call(e,[t,r],s):s()},o.get=function(e,t,n){const o=()=>e[t],i=void 0!==s?s.call(e,[t,n],o):o();return"function"==typeof i?(...s)=>{const n=i.bind(e,...s);return void 0!==r?r.call(e,[t,s],n):n()}:i},o}(t));return r}function He(e){const t=new Headers,r=e.split(/[\r\n]+/);for(const e of r){if(""===e.trim())continue;const[r,...s]=e.split(": "),n=s.join(": ");t.append(r,n)}return t}var De=Symbol("isMockedResponse"),Ne=U(),Ue=class{constructor(e,t){this.initialRequest=e,this.logger=t,this.method="GET",this.url=null,this.events=new Map,this.requestId=qe(),this.requestHeaders=new Headers,this.responseBuffer=new Uint8Array,this.request=_e(e,{setProperty:([e,t],r)=>{if("ontimeout"===e){const s=e.slice(2);return this.request.addEventListener(s,t),r()}return r()},methodCall:([e,t],r)=>{var s,n;switch(e){case"open":{const[e,s]=t;return void 0===s?(this.method="GET",this.url=$e(e)):(this.method=e,this.url=$e(s)),this.logger=this.logger.extend(`${this.method} ${this.url.href}`),this.logger.info("open",this.method,this.url.href),r()}case"addEventListener":{const[e,s]=t;return this.registerEvent(e,s),this.logger.info("addEventListener",e,s),r()}case"setRequestHeader":{const[e,s]=t;return this.requestHeaders.set(e,s),this.logger.info("setRequestHeader",e,s),r()}case"send":{const[e]=t;null!=e&&(this.requestBody="string"==typeof e?(n=e,V.encode(n)):e),this.request.addEventListener("load",(()=>{if(void 0!==this.onResponse){const e=function(e,t){const r=Y(e.status)?null:t;return new Response(r,{status:e.status,statusText:e.statusText,headers:He(e.getAllResponseHeaders())})}(this.request,this.request.response);this.onResponse.call(this,{response:e,isMockedResponse:De in this.request,request:o,requestId:this.requestId})}}));const o=this.toFetchApiRequest();((null==(s=this.onRequest)?void 0:s.call(this,{request:o,requestId:this.requestId}))||Promise.resolve()).finally((()=>{if(this.request.readyState<this.request.LOADING)return this.logger.info("request callback settled but request has not been handled (readystate %d), performing as-is...",this.request.readyState),Ne&&this.request.setRequestHeader("x-interceptors-internal-request-id",this.requestId),r()}));break}default:return r()}}})}registerEvent(e,t){const r=(this.events.get(e)||[]).concat(t);this.events.set(e,r),this.logger.info('registered event "%s"',e,t)}respondWith(e){this.logger.info("responding with a mocked response: %d %s",e.status,e.statusText),Ge(this.request,De,!0),Ge(this.request,"status",e.status),Ge(this.request,"statusText",e.statusText),Ge(this.request,"responseURL",this.url.href),this.request.getResponseHeader=new Proxy(this.request.getResponseHeader,{apply:(t,r,s)=>{if(this.logger.info("getResponseHeader",s[0]),this.request.readyState<this.request.HEADERS_RECEIVED)return this.logger.info("headers not received yet, returning null"),null;const n=e.headers.get(s[0]);return this.logger.info('resolved response header "%s" to',s[0],n),n}}),this.request.getAllResponseHeaders=new Proxy(this.request.getAllResponseHeaders,{apply:()=>{if(this.logger.info("getAllResponseHeaders"),this.request.readyState<this.request.HEADERS_RECEIVED)return this.logger.info("headers not received yet, returning empty string"),"";const t=Array.from(e.headers.entries()).map((([e,t])=>`${e}: ${t}`)).join("\r\n");return this.logger.info("resolved all response headers to",t),t}}),Object.defineProperties(this.request,{response:{enumerable:!0,configurable:!1,get:()=>this.response},responseText:{enumerable:!0,configurable:!1,get:()=>this.responseText},responseXML:{enumerable:!0,configurable:!1,get:()=>this.responseXML}});const t=e.headers.has("Content-Length")?Number(e.headers.get("Content-Length")):void 0;this.logger.info("calculated response body length",t),this.trigger("loadstart",{loaded:0,total:t}),this.setReadyState(this.request.HEADERS_RECEIVED),this.setReadyState(this.request.LOADING);const r=()=>{this.logger.info("finalizing the mocked response..."),this.setReadyState(this.request.DONE),this.trigger("load",{loaded:this.responseBuffer.byteLength,total:t}),this.trigger("loadend",{loaded:this.responseBuffer.byteLength,total:t})};if(e.body){this.logger.info("mocked response has body, streaming...");const s=e.body.getReader(),n=async()=>{const{value:e,done:o}=await s.read();if(o)return this.logger.info("response body stream done!"),void r();e&&(this.logger.info("read response body chunk:",e),this.responseBuffer=function(e,t){const r=new Uint8Array(e.byteLength+t.byteLength);return r.set(e,0),r.set(t,e.byteLength),r}(this.responseBuffer,e),this.trigger("progress",{loaded:this.responseBuffer.byteLength,total:t})),n()};n()}else r()}responseBufferToText(){return e=this.responseBuffer,new TextDecoder(undefined).decode(e);var e}get response(){if(this.logger.info("getResponse (responseType: %s)",this.request.responseType),this.request.readyState!==this.request.DONE)return null;switch(this.request.responseType){case"json":{const e=function(e){try{return JSON.parse(e)}catch(e){return null}}(this.responseBufferToText());return this.logger.info("resolved response JSON",e),e}case"arraybuffer":{const t=(e=this.responseBuffer).buffer.slice(e.byteOffset,e.byteOffset+e.byteLength);return this.logger.info("resolved response ArrayBuffer",t),t}case"blob":{const e=this.request.getResponseHeader("Content-Type")||"text/plain",t=new Blob([this.responseBufferToText()],{type:e});return this.logger.info("resolved response Blob (mime type: %s)",t,e),t}default:{const e=this.responseBufferToText();return this.logger.info('resolving "%s" response type as text',this.request.responseType,e),e}}var e}get responseText(){if(N(""===this.request.responseType||"text"===this.request.responseType,"InvalidStateError: The object is in invalid state."),this.request.readyState!==this.request.LOADING&&this.request.readyState!==this.request.DONE)return"";const e=this.responseBufferToText();return this.logger.info('getResponseText: "%s"',e),e}get responseXML(){if(N(""===this.request.responseType||"document"===this.request.responseType,"InvalidStateError: The object is in invalid state."),this.request.readyState!==this.request.DONE)return null;const e=this.request.getResponseHeader("Content-Type")||"";return"undefined"==typeof DOMParser?(console.warn("Cannot retrieve XMLHttpRequest response body as XML: DOMParser is not defined. You are likely using an environment that is not browser or does not polyfill browser globals correctly."),null):(t=e,["application/xhtml+xml","application/xml","image/svg+xml","text/html","text/xml"].some((e=>t.startsWith(e)))?(new DOMParser).parseFromString(this.responseBufferToText(),e):null);var t}errorWith(e){this.logger.info("responding with an error"),this.setReadyState(this.request.DONE),this.trigger("error"),this.trigger("loadend")}setReadyState(e){this.logger.info("setReadyState: %d -> %d",this.request.readyState,e),this.request.readyState!==e?(Ge(this.request,"readyState",e),this.logger.info("set readyState to: %d",e),e!==this.request.UNSENT&&(this.logger.info('triggerring "readystatechange" event...'),this.trigger("readystatechange"))):this.logger.info("ready state identical, skipping transition...")}trigger(e,t){const r=this.request[`on${e}`],s=function(e,t,r){const s=je?ProgressEvent:Ae;return["error","progress","loadstart","loadend","load","timeout","abort"].includes(t)?new s(t,{lengthComputable:!0,loaded:(null==r?void 0:r.loaded)||0,total:(null==r?void 0:r.total)||0}):new Oe(t,{target:e,currentTarget:e})}(this.request,e,t);this.logger.info('trigger "%s"',e,t||""),"function"==typeof r&&(this.logger.info('found a direct "%s" callback, calling...',e),r.call(this.request,s));for(const[t,r]of this.events)t===e&&(this.logger.info('found %d listener(s) for "%s" event, calling...',r.length,e),r.forEach((e=>e.call(this.request,s))))}toFetchApiRequest(){this.logger.info("converting request to a Fetch API Request...");const e=new Request(this.url.href,{method:this.method,headers:this.requestHeaders,credentials:this.request.withCredentials?"include":"same-origin",body:["GET","HEAD"].includes(this.method)?null:this.requestBody}),t=_e(e.headers,{methodCall:([t,r],s)=>{switch(t){case"append":case"set":{const[e,t]=r;this.request.setRequestHeader(e,t);break}case"delete":{const[t]=r;console.warn(`XMLHttpRequest: Cannot remove a "${t}" header from the Fetch API representation of the "${e.method} ${e.url}" request. XMLHttpRequest headers cannot be removed.`);break}}return s()}});return Ge(e,"headers",t),this.logger.info("converted request to a Fetch API Request!",e),e}};function $e(e){return"undefined"==typeof location?new URL(e):new URL(e.toString(),location.href)}function Ge(e,t,r){Reflect.defineProperty(e,t,{writable:!0,enumerable:!0,value:r})}var Be=class extends be{constructor(){super(Be.interceptorSymbol)}checkEnvironment(){return void 0!==globalThis.XMLHttpRequest}setup(){const e=this.logger.extend("setup");e.info('patching "XMLHttpRequest" module...');const t=globalThis.XMLHttpRequest;N(!t[J],'Failed to patch the "XMLHttpRequest" module: already patched.'),globalThis.XMLHttpRequest=function({emitter:e,logger:t}){return new Proxy(globalThis.XMLHttpRequest,{construct(r,s,n){t.info("constructed new XMLHttpRequest");const o=Reflect.construct(r,s,n),i=Object.getOwnPropertyDescriptors(r.prototype);for(const e in i)Reflect.defineProperty(o,e,i[e]);const a=new Ue(o,t);return a.onRequest=async function({request:t,requestId:r}){const{interactiveRequest:s,requestController:n}=Ie(t);this.logger.info("awaiting mocked response..."),e.once("request",(({requestId:e})=>{e===r&&"pending"===n.responsePromise.state&&n.respondWith(void 0)}));const i=await $((async()=>{this.logger.info('emitting the "request" event for %s listener(s)...',e.listenerCount("request")),await Te(e,"request",{request:s,requestId:r}),this.logger.info('all "request" listeners settled!');const t=await n.responsePromise;return this.logger.info("event.respondWith called with:",t),t}));if(i.error){if(this.logger.info("request listener threw an exception, aborting request...",i.error),i.error instanceof Response)return void(Q(i.error)?a.errorWith(new TypeError("Network error")):this.respondWith(i.error));if(e.listenerCount("unhandledException")>0&&(await Te(e,"unhandledException",{error:i.error,request:t,requestId:r,controller:{respondWith:a.respondWith.bind(a),errorWith:a.errorWith.bind(a)}}),o.readyState>XMLHttpRequest.OPENED))return;return void a.respondWith(z(i.error))}const l=i.data;if(void 0!==l)return this.logger.info("received mocked response: %d %s",l.status,l.statusText),Q(l)?(this.logger.info("received a network error response, rejecting the request promise..."),void a.errorWith(new TypeError("Network error"))):a.respondWith(l);this.logger.info("no mocked response received, performing request as-is...")},a.onResponse=async function({response:t,isMockedResponse:r,request:s,requestId:n}){this.logger.info('emitting the "response" event for %s listener(s)...',e.listenerCount("response")),e.emit("response",{response:t,isMockedResponse:r,request:s,requestId:n})},a.request}})}({emitter:this.emitter,logger:this.logger}),e.info('native "XMLHttpRequest" module patched!',globalThis.XMLHttpRequest.name),Object.defineProperty(globalThis.XMLHttpRequest,J,{enumerable:!0,configurable:!0,value:!0}),this.subscriptions.push((()=>{Object.defineProperty(globalThis.XMLHttpRequest,J,{value:void 0}),globalThis.XMLHttpRequest=t,e.info('native "XMLHttpRequest" module restored!',globalThis.XMLHttpRequest.name)}))}},Fe=Be;function Xe(){try{const e=new ReadableStream({start:e=>e.close()});return(new MessageChannel).port1.postMessage(e,[e]),!0}catch(e){return!1}}Fe.interceptorSymbol=Symbol("xhr");var Ve=class extends A{context;startHandler=null;stopHandler=null;listeners;constructor(...e){super(...e),N(!U(),l.formatMessage("Failed to execute `setupWorker` in a non-browser environment. Consider using `setupServer` for Node.js environment instead.")),this.listeners=[],this.context=this.createWorkerContext()}createWorkerContext(){const e={isMockingEnabled:!1,startOptions:null,worker:null,getRequestHandlers:()=>this.handlersController.currentHandlers(),registration:null,requests:new Map,emitter:this.emitter,workerChannel:{on:(e,t)=>{this.context.events.addListener(navigator.serviceWorker,"message",(r=>{if(r.source!==this.context.worker)return;const s=r.data;s&&s.type===e&&t(r,s)}))},send:e=>{this.context.worker?.postMessage(e)}},events:{addListener:(e,t,r)=>(e.addEventListener(t,r),this.listeners.push({eventType:t,target:e,callback:r}),()=>{e.removeEventListener(t,r)}),removeAllListeners:()=>{for(const{target:e,eventType:t,callback:r}of this.listeners)e.removeEventListener(t,r);this.listeners=[]},once:e=>{const t=[];return new Promise(((r,s)=>{t.push(this.context.events.addListener(navigator.serviceWorker,"message",(t=>{try{const s=t.data;s.type===e&&r(s)}catch(e){s(e)}})),this.context.events.addListener(navigator.serviceWorker,"messageerror",s))})).finally((()=>{t.forEach((e=>e()))}))}},supports:{serviceWorkerApi:!("serviceWorker"in navigator)||"file:"===location.protocol,readableStreamTransfer:Xe()}};return this.startHandler=e.supports.serviceWorkerApi?function(e){return async function(t){e.fallbackInterceptor=function(e,t){const r=new ke({name:"fallback",interceptors:[new Me,new Fe]});return r.on("request",(async({request:r,requestId:s})=>{const n=r.clone(),o=await I(r,s,e.getRequestHandlers(),t,e.emitter,{onMockedResponse(r,{handler:s,parsedResult:o}){t.quiet||e.emitter.once("response:mocked",(({response:e})=>{s.log({request:n,response:e,parsedResult:o})}))}});o&&r.respondWith(o)})),r.on("response",(({response:t,isMockedResponse:r,request:s,requestId:n})=>{e.emitter.emit(r?"response:mocked":"response:bypass",{response:t,request:s,requestId:n})})),r.apply(),r}(e,t),B({message:"Mocking enabled (fallback mode).",quiet:t.quiet})}}(e):xe(e),this.stopHandler=e.supports.serviceWorkerApi?function(e){return function(){e.fallbackInterceptor?.dispose(),Le({quiet:e.startOptions?.quiet})}}(e):(e=>function(){e.isMockingEnabled?(e.workerChannel.send("MOCK_DEACTIVATE"),e.isMockingEnabled=!1,window.clearInterval(e.keepAliveInterval),Le({quiet:e.startOptions?.quiet})):l.warn('Found a redundant "worker.stop()" call. Note that stopping the worker while mocking already stopped has no effect. Consider removing this "worker.stop()" call.')})(e),e}async start(e={}){return!0===e.waitUntilReady&&l.warn('The "waitUntilReady" option has been deprecated. Please remove it from this "worker.start()" call. Follow the recommended Browser integration (https://mswjs.io/docs/integrations/browser) to eliminate any race conditions between the Service Worker registration and any requests made by your application on initial render.'),this.context.startOptions=W(Ee,e),await this.startHandler(this.context.startOptions,e)}stop(){super.dispose(),this.context.events.removeAllListeners(),this.context.emitter.removeAllListeners(),this.stopHandler()}};function Je(...e){return new Ve(...e)}}}]);